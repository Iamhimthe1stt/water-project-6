<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Water Purity Scanner</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', sans-serif;
      min-height: 100vh;
      background: linear-gradient(135deg, #e0f7fa, #b2ebf2, #e0f2f1);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .card {
      background: white;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0,150,200,0.12);
      padding: 40px 36px;
      width: 100%;
      max-width: 460px;
    }
    .logo { font-size: 2.4rem; text-align: center; margin-bottom: 6px; }
    h1 { text-align: center; font-size: 1.4rem; color: #00796b; margin-bottom: 4px; }
    .subtitle { text-align: center; font-size: 0.85rem; color: #90a4ae; margin-bottom: 28px; }
    label { font-size: 0.85rem; font-weight: 600; color: #546e7a; display: block; margin-bottom: 7px; }
    input {
      width: 100%; padding: 13px 16px;
      border: 2px solid #e0e0e0; border-radius: 12px;
      font-size: 1rem; transition: border-color 0.2s; outline: none; color: #37474f;
    }
    input:focus { border-color: #26c6da; }
    button {
      margin-top: 16px; width: 100%; padding: 14px;
      background: linear-gradient(90deg, #00bcd4, #00897b);
      color: white; border: none; border-radius: 12px;
      font-size: 1rem; font-weight: 700; cursor: pointer;
      letter-spacing: 0.5px; transition: opacity 0.2s, transform 0.1s;
    }
    button:hover { opacity: 0.92; transform: translateY(-1px); }
    button:active { transform: translateY(0); }

    /* suggestions dropdown */
    .suggestions {
      border: 1px solid #e0e0e0; border-top: none;
      border-radius: 0 0 12px 12px; background: white;
      max-height: 180px; overflow-y: auto; display: none;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    .suggestions div {
      padding: 10px 16px; cursor: pointer;
      font-size: 0.9rem; color: #37474f;
      border-bottom: 1px solid #f5f5f5;
    }
    .suggestions div:hover { background: #e0f7fa; }

    #result {
      margin-top: 28px; border-radius: 14px; padding: 24px 20px;
      display: none; animation: fadeIn 0.4s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .result-name { font-size: 1.1rem; font-weight: 700; margin-bottom: 14px; text-align: center; }
    .gauge-bg { background: #e0e0e0; border-radius: 99px; height: 18px; width: 100%; overflow: hidden; margin-bottom: 10px; }
    .gauge-fill { height: 100%; border-radius: 99px; transition: width 1s ease; }
    .purity-score { font-size: 2.2rem; font-weight: 800; text-align: center; margin: 10px 0 6px; }
    .purity-label { text-align: center; font-size: 0.9rem; font-weight: 600; margin-bottom: 14px; }
    .badge {
      display: inline-block; font-size: 0.72rem; font-weight: 700;
      padding: 3px 9px; border-radius: 99px; margin-bottom: 12px;
      background: rgba(0,0,0,0.08); color: #455a64;
    }
    .badge-row { text-align: center; }
    .details {
      font-size: 0.82rem; color: #607d8b;
      border-top: 1px solid #eceff1; padding-top: 12px; line-height: 1.9;
    }
    .details span { font-weight: 600; color: #455a64; }
    .excellent { background: #e8f5e9; }
    .excellent .gauge-fill  { background: linear-gradient(90deg,#66bb6a,#2e7d32); }
    .excellent .purity-score, .excellent .purity-label { color: #2e7d32; }
    .good { background: #e3f2fd; }
    .good .gauge-fill  { background: linear-gradient(90deg,#42a5f5,#1565c0); }
    .good .purity-score, .good .purity-label { color: #1565c0; }
    .average { background: #fff8e1; }
    .average .gauge-fill  { background: linear-gradient(90deg,#ffca28,#f57f17); }
    .average .purity-score, .average .purity-label { color: #f57f17; }
    .poor { background: #fce4ec; }
    .poor .gauge-fill  { background: linear-gradient(90deg,#ef9a9a,#b71c1c); }
    .poor .purity-score, .poor .purity-label { color: #b71c1c; }
    .error-msg {
      margin-top: 22px; background: #fff3e0;
      border-left: 4px solid #ff9800; padding: 14px 16px;
      border-radius: 8px; font-size: 0.88rem; color: #e65100; display: none;
    }
    .hint {
      margin-top: 14px; font-size: 0.78rem; color: #90a4ae; text-align: center;
    }
  </style>
</head>
<body>
<div class="card">
  <div class="logo">üíß</div>
  <h1>Water Purity Scanner</h1>
  <p class="subtitle">Search by brand name or barcode ‚Äî UK & International</p>

  <label for="waterInput">Brand Name or Barcode</label>
  <div style="position:relative">
    <input type="text" id="waterInput" placeholder="e.g. Highland Spring, Saskia, Evian‚Ä¶"
      autocomplete="off" autofocus oninput="showSuggestions(this.value)" />
    <div class="suggestions" id="suggestions"></div>
  </div>
  <button onclick="scanWater()">üîç Scan Water</button>
  <p class="hint">Try: Ashbeck ¬∑ Highland Spring ¬∑ Saskia ¬∑ Voss ¬∑ Buxton ¬∑ Hildon</p>

  <div class="error-msg" id="errorMsg">‚ö†Ô∏è Product not found. Start typing to see suggestions.</div>

  <div id="result">
    <div class="badge-row"><span class="badge" id="storeBadge"></span></div>
    <div class="result-name" id="resultName"></div>
    <div class="gauge-bg"><div class="gauge-fill" id="gaugeFill" style="width:0%"></div></div>
    <div class="purity-score" id="purityScore"></div>
    <div class="purity-label" id="purityLabel"></div>
    <div class="details" id="details"></div>
  </div>
</div>

<script>
const waterDB = {
  // ‚îÄ‚îÄ UK Supermarket Own Brand ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  "ashbeck":          { name:"Tesco Ashbeck",         purity:88, ph:"7.4", tds:"96 mg/L",  source:"Cumbrian Springs",     store:"Tesco",      barcode:"5000119100016" },
  "tesco":            { name:"Tesco Ashbeck",         purity:88, ph:"7.4", tds:"96 mg/L",  source:"Cumbrian Springs",     store:"Tesco",      barcode:"5000119100016" },
  "saskia":           { name:"Lidl Saskia",           purity:82, ph:"7.1", tds:"112 mg/L", source:"German Springs",       store:"Lidl",       barcode:"20355808" },
  "lidl":             { name:"Lidl Saskia",           purity:82, ph:"7.1", tds:"112 mg/L", source:"German Springs",       store:"Lidl",       barcode:"20355808" },
  "fontessa":         { name:"Aldi Fontessa",         purity:81, ph:"7.0", tds:"108 mg/L", source:"European Springs",     store:"Aldi",       barcode:"5057171001204" },
  "aldi":             { name:"Aldi Fontessa",         purity:81, ph:"7.0", tds:"108 mg/L", source:"European Springs",     store:"Aldi",       barcode:"5057171001204" },
  "caledonian":       { name:"Sainsbury's Caledonian",purity:84, ph:"7.2", tds:"88 mg/L",  source:"Scottish Highlands",   store:"Sainsbury's",barcode:"01234560" },
  "sainsburys":       { name:"Sainsbury's Caledonian",purity:84, ph:"7.2", tds:"88 mg/L",  source:"Scottish Highlands",   store:"Sainsbury's",barcode:"01234560" },
  "asda smart price": { name:"Asda Smart Price Water",purity:75, ph:"6.8", tds:"145 mg/L", source:"Municipal (filtered)", store:"Asda",       barcode:"5054781000016" },
  "asda":             { name:"Asda Smart Price Water",purity:75, ph:"6.8", tds:"145 mg/L", source:"Municipal (filtered)", store:"Asda",       barcode:"5054781000016" },
  "morrisons":        { name:"Morrisons Spring Water",purity:80, ph:"7.0", tds:"102 mg/L", source:"Welsh Springs",        store:"Morrisons",  barcode:"5010251023874" },
  "co-op":            { name:"Co-op Natural Mineral",purity:79,  ph:"7.1", tds:"120 mg/L", source:"UK Springs",           store:"Co-op",      barcode:"5000128700016" },
  // ‚îÄ‚îÄ UK Premium Brands ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  "highland spring":  { name:"Highland Spring",       purity:93, ph:"7.8", tds:"116 mg/L", source:"Ochil Hills, Scotland",store:"Most UK supermarkets", barcode:"5010103001001" },
  "buxton":           { name:"Buxton",                purity:85, ph:"7.4", tds:"280 mg/L", source:"Derbyshire, England",  store:"Most UK supermarkets", barcode:"5000168018030" },
  "harrogate":        { name:"Harrogate Spring",      purity:89, ph:"7.6", tds:"122 mg/L", source:"Yorkshire, England",   store:"Waitrose / M&S",       barcode:"5011555060018" },
  "hildon":           { name:"Hildon",                purity:91, ph:"7.5", tds:"312 mg/L", source:"Hampshire, England",   store:"Waitrose / M&S",       barcode:"5010347000016" },
  "brecon carreg":    { name:"Brecon Carreg",         purity:90, ph:"8.0", tds:"65 mg/L",  source:"Brecon Beacons, Wales",store:"Tesco / Waitrose",     barcode:"5010347100015" },
  "radnor hills":     { name:"Radnor Hills",          purity:87, ph:"7.6", tds:"92 mg/L",  source:"Powys, Wales",         store:"Tesco / Asda",         barcode:"5010347200014" },
  "cawston":          { name:"Cawston Press Water",   purity:83, ph:"7.3", tds:"78 mg/L",  source:"Norfolk, England",     store:"Sainsbury's / Waitrose",barcode:"5010347300013" },
  // ‚îÄ‚îÄ UK Sparkling ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  "schweppes":        { name:"Schweppes Sparkling",   purity:72, ph:"5.5", tds:"195 mg/L", source:"Municipal (carbonated)",store:"All UK supermarkets", barcode:"5010225000013" },
  "fever-tree":       { name:"Fever-Tree Spring",     purity:86, ph:"7.2", tds:"110 mg/L", source:"Various Natural Springs",store:"Waitrose / Tesco",   barcode:"5060108450014" },
  // ‚îÄ‚îÄ International (widely stocked in UK) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  "evian":            { name:"Evian",                 purity:92, ph:"7.2", tds:"309 mg/L", source:"French Alps",          store:"All UK supermarkets", barcode:"3068320123107" },
  "volvic":           { name:"Volvic",                purity:90, ph:"7.0", tds:"130 mg/L", source:"Auvergne Volcanoes",   store:"All UK supermarkets", barcode:"5000107004271" },
  "voss":             { name:"Voss",                  purity:95, ph:"6.0", tds:"44 mg/L",  source:"Norwegian Artesian",   store:"Waitrose / Ocado",    barcode:"769716000003" },
  "fiji":             { name:"Fiji",                  purity:88, ph:"7.7", tds:"222 mg/L", source:"Fiji Islands",         store:"Waitrose / Ocado",    barcode:"632565000014" },
  "smartwater":       { name:"Smart Water",           purity:85, ph:"7.0", tds:"120 mg/L", source:"Vapor distilled",      store:"Tesco / Asda",        barcode:"786162009019" },
  "perrier":          { name:"Perrier",               purity:87, ph:"5.5", tds:"475 mg/L", source:"Verg√®ze Spring",       store:"All UK supermarkets", barcode:"074780643600" },
  "san pellegrino":   { name:"San Pellegrino",        purity:83, ph:"5.6", tds:"854 mg/L", source:"Italian Alps",         store:"All UK supermarkets", barcode:"041508920019" },
  "dasani":           { name:"Dasani",                purity:74, ph:"6.0", tds:"160 mg/L", source:"Municipal (filtered)", store:"Tesco",               barcode:"049000042511" },
  "aquafina":         { name:"Aquafina",              purity:76, ph:"6.0", tds:"10 mg/L",  source:"Municipal (purified)", store:"Selected stores",     barcode:"012000001086" },
};

// Index by barcode too
const barcodeDB = {};
Object.values(waterDB).forEach(p => { if (p.barcode) barcodeDB[p.barcode] = p; });

function findProduct(query) {
  const q = query.trim().toLowerCase();
  if (!q) return null;
  if (barcodeDB[q]) return barcodeDB[q];
  if (waterDB[q]) return waterDB[q];
  const key = Object.keys(waterDB).find(k => k.includes(q) || q.includes(k));
  return key ? waterDB[key] : null;
}

function getRating(p) {
  if (p >= 90) return { cls:"excellent", label:"‚úÖ Excellent Purity" };
  if (p >= 80) return { cls:"good",      label:"üëç Good Purity" };
  if (p >= 65) return { cls:"average",   label:"‚ö†Ô∏è Average Purity" };
  return               { cls:"poor",     label:"‚ùå Poor Purity" };
}

function showSuggestions(val) {
  const box = document.getElementById("suggestions");
  const q = val.trim().toLowerCase();
  if (!q) { box.style.display = "none"; return; }
  // Deduplicate by product name
  const seen = new Set(), matches = [];
  Object.entries(waterDB).forEach(([k, v]) => {
    if ((k.includes(q) || v.name.toLowerCase().includes(q)) && !seen.has(v.name)) {
      seen.add(v.name);
      matches.push(v);
    }
  });
  if (!matches.length) { box.style.display = "none"; return; }
  box.innerHTML = matches.slice(0, 6).map(v =>
    `<div onclick="selectSuggestion('${v.name}')">${v.name} <span style="color:#90a4ae;font-size:0.78rem">‚Äî ${v.store}</span></div>`
  ).join("");
  box.style.display = "block";
}

function selectSuggestion(name) {
  document.getElementById("waterInput").value = name;
  document.getElementById("suggestions").style.display = "none";
  scanWater();
}

function scanWater() {
  const query  = document.getElementById("waterInput").value;
  const result = document.getElementById("result");
  const errMsg = document.getElementById("errorMsg");
  document.getElementById("suggestions").style.display = "none";
  result.style.display = "none";
  errMsg.style.display  = "none";
  result.className      = "";

  const p = findProduct(query);
  if (!p) { errMsg.style.display = "block"; return; }

  const rating = getRating(p.purity);
  document.getElementById("storeBadge").textContent     = `üè™ ${p.store}`;
  document.getElementById("resultName").textContent     = `üíß ${p.name}`;
  document.getElementById("purityScore").textContent    = `${p.purity}%`;
  document.getElementById("purityLabel").textContent    = rating.label;
  document.getElementById("details").innerHTML =
    `<span>üß™ TDS:</span> ${p.tds}<br>
     <span>‚öóÔ∏è pH:</span> ${p.ph}<br>
     <span>üìç Source:</span> ${p.source}<br>
     <span>üè∑Ô∏è Barcode:</span> ${p.barcode}`;

  result.className     = rating.cls;
  result.style.display = "block";
  const fill = document.getElementById("gaugeFill");
  fill.style.width = "0%";
  setTimeout(() => fill.style.width = p.purity + "%", 50);
}

document.getElementById("waterInput")
  .addEventListener("keydown", e => {
    if (e.key === "Enter") scanWater();
    if (e.key === "Escape") document.getElementById("suggestions").style.display = "none";
  });

document.addEventListener("click", e => {
  if (!e.target.closest(".card")) document.getElementById("suggestions").style.display = "none";
});
  // ADVANCED SEARCH (case insensitive + partial match)
function findWater(name) {
  name = name.toLowerCase();
  return waterDatabase.find(w =>
    w.name.toLowerCase().includes(name)
  );
}
</script>
</body>

</html>
